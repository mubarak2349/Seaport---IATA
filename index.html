<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SEAPORT AIR DIV â€“ CASS PAYMENT DETAILS</title>

<style>
/* ===== Flying Logo ===== */
.bg-flight{
 position:fixed;width:260px;height:110px;opacity:.14;
 pointer-events:none;z-index:0;
 clip-path:polygon(5% 50%,15% 35%,40% 30%,70% 20%,95% 50%,70% 80%,40% 70%,15% 65%);
 transition:transform 5s linear,top 5s linear,left 5s linear
}
.logo{width:100%;height:100%;position:relative}
.blue{position:absolute;width:55%;height:100%;background:#0a4fd6;clip-path:polygon(0 10%,85% 0,45% 100%,0 90%)}
.white{position:absolute;width:70%;height:100%;left:30%;background:#fff;clip-path:polygon(20% 0,60% 0,40% 50%,60% 100%,20% 100%,40% 50%)}
.dark{position:absolute;width:55%;height:100%;right:0;background:#2f2f2f;clip-path:polygon(15% 0,100% 50%,15% 100%)}

/* ===== THEME ===== */
:root{
 --bg:#020617;--panel:#020617;--card:#0b1220;--border:#1f2937;
 --txt:#e5e7eb;--muted:#9ca3af;
 --green:#22c55e;--amber:#f59e0b;--red:#ef4444;
 --blue:#38bdf8;--purple:#a78bfa;
 --current:#1e3a8a;--next:#0f766e
}
.light{
 --bg:#f8fafc;--panel:#fff;--card:#fff;--border:#e5e7eb;
 --txt:#020617;--muted:#475569;
 --current:#eef2ff;--next:#ecfeff
}

*{box-sizing:border-box}
body{
 margin:0;font-family:system-ui,Segoe UI,Arial;
 background:radial-gradient(circle at top,var(--card),var(--bg) 70%);
 color:var(--txt)
}

/* ===== HEADER ===== */
header{
 display:flex;align-items:center;gap:12px;
 padding:16px 22px;background:var(--panel);
 box-shadow:0 20px 60px rgba(0,0,0,.4);
 position:sticky;top:0;z-index:10
}
header h3{margin:0;font-size:20px}
.theme-btn{
 margin-left:auto;padding:6px 12px;border-radius:14px;
 border:1px solid var(--border);
 background:var(--card);color:var(--txt);cursor:pointer
}
.watermark{font-size:12px;opacity:.6}

/* ===== DASHBOARD ===== */
.dashboard{
 padding:20px;
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
 gap:16px
}
.card{
 background:linear-gradient(180deg,var(--card),var(--bg));
 border-radius:18px;padding:16px;
 box-shadow:0 25px 70px rgba(0,0,0,.45)
}
.card h4{margin:0;font-size:12px;color:var(--muted)}
.card p{margin:6px 0;font-size:24px;font-weight:700}
.wave{height:8px;border-radius:20px;background:var(--bg);overflow:hidden}
.wave span{display:block;height:100%;background:linear-gradient(90deg,var(--blue),var(--purple))}

/* ===== FILTER ===== */
.filter-bar{padding:0 20px 10px}
select{
 padding:6px 10px;border-radius:10px;
 background:var(--card);color:var(--txt);
 border:1px solid var(--border)
}

/* ===== TABLE ===== */
.container{padding:0 20px 30px}
.table-wrap{
 background:var(--panel);border-radius:22px;
 box-shadow:0 40px 120px rgba(0,0,0,.5);
 overflow:auto
}
table{width:100%;border-collapse:collapse;font-size:12px}
th{
 padding:12px;background:var(--panel);
 border-bottom:1px solid var(--border);
 text-transform:uppercase
}
td{padding:10px;border-bottom:1px solid var(--bg);text-align:center}
tr.freeze{opacity:.45}
tr.current{background:var(--current)}
tr.next{background:var(--next)}

input{
 width:90px;padding:6px;text-align:right;
 background:var(--bg);color:var(--txt);
 border:1px solid var(--border);border-radius:10px
}
input:disabled{opacity:.4}

.btn{
 padding:5px 9px;border-radius:10px;
 border:1px solid var(--border);
 background:linear-gradient(180deg,var(--card),var(--bg));
 color:var(--txt);font-size:11px;cursor:pointer;margin:2px
}

.paidCell{background:rgba(34,197,94,.25)}
.pendingCell{background:rgba(245,158,11,.25)}
.days-ok{color:var(--green)}
.days-warn{color:var(--amber)}
.days-over,.freeze-days{color:var(--red);font-weight:700}

.donut{
 width:34px;height:34px;border-radius:50%;
 margin:auto;
 background:conic-gradient(
  var(--green) 0deg,
  var(--green) var(--a),
  var(--amber) var(--a),
  var(--amber) var(--b),
  var(--blue) var(--b),
  var(--blue) 360deg
 )
}
.mini{display:flex;height:8px;border-radius:6px;overflow:hidden;background:var(--bg)}
.mini div:nth-child(1){background:var(--green)}
.mini div:nth-child(2){background:var(--amber)}

footer{text-align:center;padding:14px;font-size:12px;opacity:.6}

/* ===== CONFIG ===== */
.config-panel{
 position:fixed;top:80px;right:20px;
 background:var(--panel);border-radius:12px;
 padding:12px;border:1px solid var(--border);
 box-shadow:0 10px 30px rgba(0,0,0,.3);
 z-index:100;font-size:11px;display:none
}
</style>
</head>

<body>

<div class="bg-flight" id="bgFlight">
 <div class="logo"><div class="blue"></div><div class="white"></div><div class="dark"></div></div>
</div>

<header>
 <h3>SEAPORT (Air Division) â€“ IATA CASS Payment Calendar</h3>
 <button class="theme-btn" onclick="toggleTheme()">ðŸŒ™ / ðŸŒž</button>
 <div class="watermark">FULL FEATURE â€“ LocalStorage Edition</div>
</header>

<!-- DASHBOARD -->
<div class="dashboard">
 <div class="card"><h4>Current Invoice</h4><p id="dInv">â‚¹0</p><div class="wave"><span id="wInv"></span></div></div>
 <div class="card"><h4>Pending</h4><p id="dPend">â‚¹0</p><div class="wave"><span id="wPend"></span></div></div>
 <div class="card"><h4>Remaining</h4><p id="dRem">â‚¹0</p><div class="wave"><span id="wRem"></span></div></div>
 <div class="card"><h4>Total Borrowed</h4><p id="dBor">â‚¹0</p><div class="wave"><span id="wBor"></span></div></div>
 <div class="card"><h4>AVL Balance</h4><p id="dAVL">â‚¹0</p><div class="wave"><span id="wAVL"></span></div></div>
</div>

<div class="filter-bar">
 <select id="periodFilter" onchange="applyFilter()">
  <option value="ALL">All Periods</option>
 </select>
</div>

<div class="container">
<div class="table-wrap">
<table>
<thead>
<tr>
<th>Period</th><th>Invoice</th><th>Remittance</th><th>Days</th>
<th>Srilankan</th><th>Status</th>
<th>AirIndia</th><th>Status</th>
<th>Singapore</th><th>Status</th>
<th>Total</th><th>Paid</th>
<th>AVL</th><th>Borrowed</th>
<th>Remaining</th><th>Split</th><th>Progress</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>
</div>

<div class="config-panel" id="configPanel">
 Freeze Days:
 <input id="freezeDays" type="number" value="2" min="0" onchange="saveConfig()">
 <button class="btn" onclick="toggleConfig()">âœ•</button>
</div>

<footer>Ctrl + C â†’ Freeze Configuration Panel</footer>

<script>
/* ================= GLOBAL ================= */
const STORAGE_KEY="SEAPORT_CASS_DATA";
let store={},today=new Date(),ci=-1;
let config={freezeDays:2};

/* ================= UTILS ================= */
const inr=x=>"â‚¹"+(x||0).toLocaleString("en-IN");
function fnLabel(c){
 const y=c.slice(0,4),m=c.slice(4,6),f=c[6];
 const mn=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
 return `${mn[+m]} ${y} â€“ ${f==="1"?"1st":"2nd"} FN`;
}

/* ================= CONFIG ================= */
function loadConfig(){
 if(localStorage.config) config=JSON.parse(localStorage.config);
 freezeDays.value=config.freezeDays;
}
function saveConfig(){
 config.freezeDays=+freezeDays.value||2;
 localStorage.config=JSON.stringify(config);
 renderTable();
}
function toggleConfig(){
 configPanel.style.display=configPanel.style.display?"":"block";
}

/* ================= THEME ================= */
if(localStorage.theme==="light")document.body.classList.add("light");
function toggleTheme(){
 document.body.classList.toggle("light");
 localStorage.theme=document.body.classList.contains("light")?"light":"dark";
}

/* ================= STORAGE ================= */
function loadData(){
 store=localStorage.getItem(STORAGE_KEY)?
 JSON.parse(localStorage.getItem(STORAGE_KEY)):{};
 renderTable();
}
function saveData(){
 localStorage.setItem(STORAGE_KEY,JSON.stringify(store));
}

/* ================= CORE ================= */
function renderTable(){
 tbody.innerHTML="";
 periodFilter.innerHTML='<option value="ALL">All Periods</option>';
 ci=periods.findIndex(p=>new Date(p[2])>=today);

 periods.forEach((p,i)=>{
  const d=store[p[0]]||{};
  const sl=+d.sl||0,ai=+d.ai||0,sg=+d.sg||0;
  const slp=d.slp,aip=d.aip,sgp=d.sgp;
  const avl=+d.avl||0,bor=+d.bor||0;
  const inv=sl+ai+sg;
  const paid=(slp?sl:0)+(aip?ai:0)+(sgp?sg:0);
  const rem=inv-paid-avl;
  const days=Math.ceil((new Date(p[2])-today)/86400000);

  const a=inv?sl/inv*360:0;
  const b=inv?(sl+ai)/inv*360:0;

  const tr=document.createElement("tr");
  tr.dataset.period=p[0];
  tr.className=i<ci?"freeze":i===ci?"current":i===ci+1?"next":"freeze";

  tr.innerHTML=`
  <td>${fnLabel(p[0])}</td>
  <td>${p[1]}</td>
  <td>${p[2]}</td>
  <td class="${days<0?"days-over":days<15?"days-warn":"days-ok"}">${days}</td>

  <td class="${slp?"paidCell":"pendingCell"}"><input value="${sl}" onchange="saveValue('${p[0]}','sl',this.value)"></td>
  <td><button class="btn" onclick="togglePaid('${p[0]}','slp',1)">Paid</button><button class="btn" onclick="togglePaid('${p[0]}','slp',0)">Pending</button></td>

  <td class="${aip?"paidCell":"pendingCell"}"><input value="${ai}" onchange="saveValue('${p[0]}','ai',this.value)"></td>
  <td><button class="btn" onclick="togglePaid('${p[0]}','aip',1)">Paid</button><button class="btn" onclick="togglePaid('${p[0]}','aip',0)">Pending</button></td>

  <td class="${sgp?"paidCell":"pendingCell"}"><input value="${sg}" onchange="saveValue('${p[0]}','sg',this.value)"></td>
  <td><button class="btn" onclick="togglePaid('${p[0]}','sgp',1)">Paid</button><button class="btn" onclick="togglePaid('${p[0]}','sgp',0)">Pending</button></td>

  <td>${inr(inv)}</td>
  <td>${inr(paid)}</td>
  <td><input value="${avl}" onchange="saveValue('${p[0]}','avl',this.value)"></td>
  <td><input value="${bor}" onchange="saveValue('${p[0]}','bor',this.value)"></td>
  <td>${inr(rem)}</td>

  <td><div class="donut" style="--a:${a}deg;--b:${b}deg"></div></td>
  <td><div class="mini"><div style="width:${inv?paid/inv*100:0}%"></div><div style="width:${inv?rem/inv*100:0}%"></div></div></td>
  `;
  tbody.appendChild(tr);

  const o=document.createElement("option");
  o.value=p[0];o.text=fnLabel(p[0]);
  periodFilter.appendChild(o);
 });
 updateDashboard();
}

/* ================= DASHBOARD ================= */
function updateDashboard(){
 let inv=0,pend=0,rem=0,bor=0,avl=0;
 periods.forEach((p,i)=>{
  const d=store[p[0]]||{};
  bor+=+d.bor||0;
  if(i===ci){
   const sl=+d.sl||0,ai=+d.ai||0,sg=+d.sg||0;
   const paid=(d.slp?sl:0)+(d.aip?ai:0)+(d.sgp?sg:0);
   inv=sl+ai+sg;
   pend=inv-paid;
   avl=+d.avl||0;
   rem=inv-paid-avl;
  }
 });
 dInv.textContent=inr(inv);
 dPend.textContent=inr(pend);
 dRem.textContent=inr(rem);
 dBor.textContent=inr(bor);
 dAVL.textContent=inr(avl);
 w("wInv",inv,inv);w("wPend",pend,inv);w("wRem",rem,inv);w("wBor",bor,bor);w("wAVL",avl,inv);
}
function w(id,v,m){document.getElementById(id).style.width=(m?Math.min(100,v/m*100):0)+"%"}

/* ================= SAVE ================= */
function saveValue(c,f,v){
 store[c]=store[c]||{};
 store[c][f]=+v.replace(/\D/g,"")||0;
 saveData();renderTable();
}
function togglePaid(c,f,v){
 store[c]=store[c]||{};
 store[c][f]=v;
 saveData();renderTable();
}
function applyFilter(){
 const v=periodFilter.value;
 [...tbody.children].forEach(r=>r.style.display=v==="ALL"||r.dataset.period===v?"":"none");
}

/* ================= FULL PERIOD LIST ================= */
const periods=[
["20251102F","2025-12-09","2025-12-30"],
["20251201F","2025-12-25","2026-01-14"],
["20251202F","2026-01-08","2026-01-30"],
["20260101F","2026-01-25","2026-02-16"],
["20260102F","2026-02-07","2026-03-02"],
["20260201F","2026-02-24","2026-03-17"],
["20260202F","2026-03-07","2026-03-30"],
["20260301F","2026-03-25","2026-04-14"],
["20260302F","2026-04-09","2026-04-30"],
["20260401F","2026-04-25","2026-05-15"],
["20260402F","2026-05-07","2026-06-01"],
["20260501F","2026-05-27","2026-06-15"],
["20260502F","2026-06-09","2026-06-30"],
["20260601F","2026-06-25","2026-07-15"],
["20260602F","2026-07-09","2026-07-30"],
["20260701F","2026-07-25","2026-08-14"],
["20260702F","2026-08-07","2026-08-31"],
["20260801F","2026-08-26","2026-09-14"],
["20260802F","2026-09-09","2026-09-30"],
["20260901F","2026-09-24","2026-10-15"],
["20260902F","2026-10-08","2026-10-30"],
["20261001F","2026-10-25","2026-11-16"],
["20261002F","2026-11-07","2026-11-30"],
["20261101F","2026-11-25","2026-12-15"],
["20261102F","2026-12-09","2026-12-30"],
["20261201F","2026-12-24","2027-01-14"],
["20261202F","2027-01-07","2027-02-01"]
];

/* ================= PLANE ================= */
let x=-30,y=30;
(function fly(){
 x+=25;y+=Math.random()*6-3;
 if(x>120){x=-30;y=Math.random()*60}
 bgFlight.style.left=x+"vw";
 bgFlight.style.top=y+"vh";
 bgFlight.style.transform=`rotate(${Math.random()*12-6}deg)`;
 setTimeout(fly,5000);
})();

/* ================= INIT ================= */
loadConfig();
loadData();
document.addEventListener("keydown",e=>{
 if(e.ctrlKey&&e.key==="c")toggleConfig();
});
</script>

</body>
</html>
